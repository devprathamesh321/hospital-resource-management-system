<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bed Management | MedFlow</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
    --primary:#2563eb;
    --success:#10b981;
    --warning:#f59e0b;
    --danger:#ef4444;
    --bg:#f1f5f9;
    --dark:#0f172a;
}

body{
    margin:0;
    font-family:'Inter',sans-serif;
    background:var(--bg);
    display:flex;
}

/* SIDEBAR */
.sidebar{
    width:260px;
    background:var(--dark);
    height:100vh;
    color:white;
    padding:20px;
    position:fixed;
}

.sidebar h2{
    color:#3b82f6;
    font-size:22px;
    margin-bottom:40px;
}

.sidebar a{
    display:block;
    padding:12px 15px;
    margin-bottom:8px;
    color:#94a3b8;
    text-decoration:none;
    border-radius:8px;
    font-weight:500;
}

.sidebar a.active,
.sidebar a:hover{
    background:#1e293b;
    color:white;
}

/* MAIN */
.main{
    margin-left:260px;
    padding:40px;
    flex-grow:1;
}

/* HEADER */
.header{
    margin-bottom:30px;
}

.header h1{
    margin:0;
    font-size:26px;
}

.header p{
    color:#64748b;
    margin-top:5px;
}

/* FORM */
.form-card{
    background:white;
    padding:25px;
    border-radius:14px;
    box-shadow:0 10px 30px rgba(0,0,0,.08);
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
    gap:20px;
    margin-bottom:35px;
}

.form-group label{
    display:block;
    font-size:13px;
    font-weight:600;
    margin-bottom:6px;
    color:#64748b;
}

.form-group input,
.form-group select{
    width:100%;
    padding:12px;
    border-radius:8px;
    border:1px solid #e2e8f0;
    font-size:14px;
}

.btn{
    align-self:end;
    background:var(--primary);
    color:white;
    border:none;
    padding:13px;
    border-radius:8px;
    font-weight:600;
    cursor:pointer;
}

.btn:hover{
    background:#1d4ed8;
}

/* TABLE */
.table-box{
    background:white;
    border-radius:14px;
    box-shadow:0 10px 30px rgba(0,0,0,.08);
    overflow:hidden;
}

table{
    width:100%;
    border-collapse:collapse;
}

th{
    background:#f8fafc;
    padding:16px;
    text-align:left;
    font-size:12px;
    color:#64748b;
    text-transform:uppercase;
}

td{
    padding:16px;
    border-bottom:1px solid #f1f5f9;
    font-size:14px;
}

tr:hover{
    background:#f9fafb;
}

/* STATUS BADGES */
.badge{
    padding:5px 12px;
    border-radius:20px;
    font-size:12px;
    font-weight:600;
}

.available{background:#dcfce7;color:#166534;}
.occupied{background:#fee2e2;color:#991b1b;}
.maintenance{background:#fef3c7;color:#92400e;}

/* ACTIONS */
.action-btn{
    border:none;
    background:none;
    font-weight:600;
    cursor:pointer;
    margin-right:10px;
}

.edit{color:var(--primary);}
.delete{color:var(--danger);}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <h2>‚öïÔ∏è MedFlow</h2>
    <a href="/admin/dashboard">üìä Dashboard</a>
    <a href="/admin/beds" class="active">üõèÔ∏è Bed Management</a>
    <a href="/admin/doctors">üë®‚Äç‚öïÔ∏è Doctor Management</a>
    <a href="/emergency">üöë Emergency</a>
    <a href="/">üö™ Logout</a>
</div>

<!-- MAIN -->
<div class="main">

    <div class="header">
        <h1>Bed Management</h1>
        <p>Add, track and manage hospital beds in real time</p>
    </div>

    <!-- ADD BED FORM -->
    <form class="form-card" method="post" action="/admin/addBed">
        <div class="form-group">
            <label>Bed Type</label>
            <select name="bedType" required>
                <option value="ICU">ICU</option>
                <option value="GENERAL">General</option>
                <option value="EMERGENCY">Emergency</option>
            </select>
        </div>

        <div class="form-group">
            <label>Ward</label>
            <input type="text" name="ward" placeholder="ICU Ward / Block A" required>
        </div>

        <div class="form-group">
            <label>Status</label>
            <select name="status">
                <option value="AVAILABLE">Available</option>
                <option value="MAINTENANCE">Maintenance</option>
            </select>
        </div>

        <button class="btn">Add Bed</button>
    </form>

    <!-- BED TABLE -->
    <div class="table-box">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Type</th>
                    <th>Ward</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="b : ${beds}">
                    <td th:text="${b.bedId}">1</td>
                    <td th:text="${b.bedType}">ICU</td>
                    <td th:text="${b.ward}">ICU Ward</td>
                    <td>
                        <span class="badge"
                              th:classappend="${b.status=='AVAILABLE'?'available':(b.status=='OCCUPIED'?'occupied':'maintenance')}"
                              th:text="${b.status}">
                        </span>
                    </td>
                    <td>
                        <!-- EDIT -->
                        <a th:href="@{/admin/editBed/{id}(id=${b.bedId})}"
                           class="action-btn edit">
                           Edit
                        </a>

                        <!-- DELETE -->
                        <form th:action="@{/admin/deleteBed/{id}(id=${b.bedId})}"
                              method="post"
                              style="display:inline;">
                            <button class="action-btn delete"
                                    onclick="return confirm('Delete this bed permanently?')">
                                Delete
                            </button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

</div>

</body>
</html>
